<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Utilisateur</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>
    <h1>Utilisateur</h1>
    <span th:text="${userToDisplay.username}"></span>
    <table>
        <tr>
            <th>Id</th>
            <th>Username</th>
            <th>FirstName</th>
            <th>LastName</th>
            <th>Email</th>
            <th>Balance</th>
            <th>TransactionsSent Username</th>
            <th>TransactionsSent Message</th>
            <th>MessageSent</th>
            <th>TransactionsReceive Username</th>
            <th>TransactionsReceive Message</th>
        </tr>
        <tr>
            <td th:text="${userToDisplay.id}"></td>
            <td th:text="${userToDisplay.username}"></td>
            <td th:text="${userToDisplay.firstName}"></td>
            <td th:text="${userToDisplay.lastName}"></td>
            <td th:text="${userToDisplay.email}"></td>
            <td th:text="${userToDisplay.balance}"></td>
            <td>
                <span th:each="transaction : ${userToDisplay.transactionSent}">
                    <span th:text="${transaction.sender.username}"></span>
                </span>
            </td>
            <td>
                <span th:each="transaction : ${userToDisplay.transactionSent}">
                    <span th:text="${transaction.messageContent}"></span>
                </span>
            </td>
            <td>
                <span th:each="message : ${userToDisplay.messageSent}">
                    <span th:text="${message.content}"></span>
                </span>
            </td>
            <td>
                <span th:each="transaction : ${userToDisplay.transactionReceived}">
                    <span th:text="${transaction.receiver.username}"></span>
                </span>
            </td>
            <td>
                <span th:each="transaction : ${userToDisplay.transactionReceived}">
                    <span th:text="${transaction.messageContent}"></span>
                </span>
            </td>
        </tr>
    </table>

    <form th:action="@{/utilisateur/update}" th:object="${userToDisplay}" method="post">
        <input type="hidden" th:field="*{id}" />

        <label for="username">Username :</label>
        <input type="text" id="username" th:field="*{username}" required /><br>

        <label for="firstName">Prénom :</label>
        <input type="text" id="firstName" th:field="*{firstName}" required /><br>

        <label for="lastName">Nom :</label>
        <input type="text" id="lastName" th:field="*{lastName}" required /><br>

        <label for="email">Email :</label>
        <input type="email" id="email" th:field="*{email}" required /><br>

        <label for="iban">IBAN :</label>
        <input type="text" id="iban" th:field="*{iban}" required /><br>

        <label for="balance">Balance :</label>
        <input type="number" step="0.01" id="balance" th:field="*{balance}" required /><br>

        <button type="submit">Mettre à jour</button>
    </form>
</body>
</html>